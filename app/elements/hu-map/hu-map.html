<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/google-map/google-map.html">
<link rel="import" href="../api-ajax/api-ajax.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/google-map-markerclusterer/google-map-markerclusterer.html">

<polymer-element name="main-campus" extends="google-map-marker"attributes="">
  <template>
  <style>
  :host {
    display: block;
  }
  </style>
</template>
<script>
(function () {
  'use strict';

  Polymer();

})();
</script>
</polymer-element>
<polymer-element name="hu-map" attributes="">
  <template>
    <style>
      :host {
        display: block;
      }
      google-map {
        padding-top:16px;
        display: block;
        height: 600px;
      }
      paper-button{
        margin-top:8px;
        margin-bottom:8px;
      }
    </style>
    <paper-button on-tap="{{clickHandler}}" raised>MAIN CAMPUS</paper-button>
    <paper-button on-tap="{{clickHandler}}" raised>EAST CAMPUS</paper-button>
    <paper-button on-tap="{{clickHandler}}" raised>WEST CAMPUS</paper-button>
    <paper-button on-tap="{{clickHandler}}" raised>PARKING</paper-button>
    <paper-button on-tap="{{clickHandler}}" raised>RESIDENCE HALLS</paper-button>
    <paper-button on-tap="{{clickHandler}}" raised>DINING</paper-button>
    <paper-button on-tap="{{clickHandler}}" raised>BLUE LIGHTS</paper-button>
    <paper-button on-tap="{{clickHandler}}" raised>BISON ONE CARD</paper-button>
    <api-ajax bldgs = "{{bldgs}}"></api-ajax>
    <google-map
      id="humap"
      apiKey="{{apiKey}}"
      map="{{map}}"
      styles="{{mapStyle}}"
      latitude="38.922684" longitude="-77.019438"
      zoom="16"
      maxzoom="16"
      minZoom="16"
      disableDefaultUI>f
        <template repeat = "{{bldg in bldgs}}">
          <google-map-marker
            latitude="{{bldg.lat}}"
            longitude="{{bldg.lon}}">
            <google-map-markerclusterer map="{{map}}"></google-map-markerclusterer>

            <h3>{{bldg.campus_name}}({{bldg.campus_id}})</h3>
            <h3>{{bldg.building_name}}({{bldg.building_id}})</h3>
            <p>
              {{bldg.building_address}}
            </p>
          </google-map-marker>
        </template>
      </google-map>

  </template>
  <script>
    (function () {
      'use strict';

      Polymer({

        ready:function(){
          this.apiKey = "AIzaSyAQ8fwfkyjhln59a2ODNDNF2f6lXZhA_aU";
          this.mapStyle = [
            {"elementType":"labels.icon","stylers":[{"color":"#365779"},{"visibility":"off"}]}
            ,{"featureType":"landscape","stylers":[{"color":"#042E58"}]}
            ,{"featureType":"road.highway","stylers":[{"color":"#A51A1D"}]}
            ,{"featureType":"road.local","stylers":[{"color":"#808080"},{"visibility":"off"}]}
            ,{"featureType":"road.arterial","stylers":[{"color":"#808080"},{"visibility":"off"}]}
            ,{"elementType":"labels.text","stylers":[{"color":"#ffffff"},{"weight":0.1}]}
            ,{"featureType":"poi","stylers":[{"color":"#365779"}]}
            ,{"featureType":"poi","elementType":"labels.text","stylers":[{"color":"#ffffff"}]}
            ,{"featureType":"water"}
            ,{"featureType":"transit","stylers":[{"color":"#365779"}]}];
        },
        domReady:function(){
        },
        mapReady:function(){
          console.log("map ready");
          // console.log(this.$.humap.map);
          console.log(google.maps)
        },
        clickHandler:function(e){
          console.log("click");
          switch (e.target.innerText) {
            case "MAIN CAMPUS":
              console.log("MAIN CAMPUS button clicked");

              break;
              case "EAST CAMPUS":
                console.log("EAST CAMPUS button clicked");
                break;
                case "WEST CAMPUS":
                  console.log("WEST CAMPUS button clicked");
                  break;
                  case "PARKING":
                    console.log("PARKING button clicked");
                    break;
                    case "RESIDENCE HALLS":
                      console.log("RESIDENCE HALLS button clicked");
                      break;
                      case "DINING":
                        console.log("DINING button clicked");
                        break;
                        case "BLUE LIGHTS":
                          console.log("BLUE LIGHTS button clicked");
                          break;
                          case "BISON ONE CARD":
                            console.log("BISON ONE CARD button clicked");
                            break;
                            default:
                              console.log("Sorry");
                            }
        },
        bldgsChanged:function(attrName,oldVal,newVal){
          console.log("bldgs attr changed");
        }
      });

    })();
  </script>
</polymer-element>
